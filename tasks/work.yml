
 # Dependency

 # Checks

  - name: Check if work dir exists
    stat:
      path: '/home/{{ username.stdout }}/work'
    register: work

 # Commands

  - name: Create ~/work dir
    file:
      path: '/home/{{ username.stdout }}/work'
      state: directory

  - name: Touch work files
    file:
      path: '/home/{{ username.stdout }}/work/{{ item }}'
      state: touch
    with_items:
    - bash.sh
    - html.html
    - java.java
    - latex.tex
    - php.php
    - text.txt
    - data.dat
    - email.md
    - json.json
    - markdown.md
    - python.py
    - bibliography.bib
    - yaml.yml
    - xml.xml
    - temp.tmp
    when: not work.stat.exists

  - name: Set bash.sh exec permission
    file:
      path: home/{{ username.stdout }}/work/bash.sh
      mode: u+x,g+x
    when: not work.stat.exists

  - name: Move sample.bib to bibliography.bib
    command: mv /home/{{ username.stdout }}/work/sample.bib /home/{{ username.stdout }}/work/bibliography.bib
    args:
      removes: /home/{{ username.stdout }}/work/sample.bib
      creates: /home/{{ username.stdout }}/work/bibliography.bib
